# Система подтверждения электронной почты - TutorHub

## Описание

Система подтверждения email для Django приложения TutorHub, которая позволяет пользователям подтверждать свои email адреса после регистрации.

## Файлы системы

### Шаблоны (Templates)
- `accounts/templates/accounts/email_verification.html` - Основная страница подтверждения email
- `accounts/templates/accounts/verification_email.html` - HTML шаблон для email письма
- `accounts/templates/accounts/verification_success.html` - Страница успешной отправки письма

### Views
- `EmailVerificationView` - Обработка страницы подтверждения и повторной отправки
- `ActivateUserView` - Активация пользователя по токену
- `send_verification_email()` - Функция отправки email

### URLs
- `/accounts/email-verification/` - Страница подтверждения email
- `/accounts/activate/<token>/` - Активация по токену

## Функциональность

### 1. Успешное подтверждение
- Отображается при успешной активации аккаунта
- Показывает иконку успеха и сообщение
- Предлагает перейти к входу в систему

### 2. Ошибка подтверждения
- Отображается при недействительном или истекшем токене
- Показывает сообщение об ошибке
- Предлагает повторную отправку письма

### 3. Форма повторной отправки
- Позволяет ввести email для повторной отправки
- Генерирует новый токен подтверждения
- Отправляет новое письмо

### 4. Модальное окно
- Дополнительная форма для повторной отправки
- Удобный интерфейс без перезагрузки страницы

## Настройка

### 1. Email настройки в settings.py
```python
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'  # или ваш SMTP сервер
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'your-email@gmail.com'
EMAIL_HOST_PASSWORD = 'your-password'
DEFAULT_FROM_EMAIL = 'noreply@tutorhub.com'
```

### 2. Обновление модели пользователя
Модель `CustomUser` уже содержит необходимые поля:
- `verification_token` - UUID токен для подтверждения
- `email_confirmed` - статус подтверждения email

### 3. Настройка домена
В функции `send_verification_email()` обновите:
```python
from_email='noreply@tutorhub.com'  # Замените на ваш email
```

## Использование

### 1. После регистрации
Пользователь автоматически перенаправляется на страницу подтверждения email.

### 2. Подтверждение
- Пользователь получает email с ссылкой
- Переходит по ссылке для активации аккаунта
- Видит страницу успешного подтверждения

### 3. Повторная отправка
- Если письмо не пришло, пользователь может запросить повторную отправку
- Вводит email и получает новое письмо с новым токеном

## Стилизация

Страница использует:
- CSS переменные из `base.html`
- Цветовая схема TutorHub (желтый/золотой)
- Адаптивный дизайн
- Анимации и переходы
- Font Awesome иконки

## Безопасность

- Токены генерируются как UUID4
- Токены уникальны для каждого пользователя
- Обработка ошибок и исключений
- Валидация email адресов

## Тестирование

Для тестирования в режиме разработки используйте:
```python
EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'
```

Это будет выводить email в консоль вместо реальной отправки.

## Расширение

Система легко расширяется:
- Добавление срока действия токенов
- Уведомления об истечении срока
- Логирование попыток подтверждения
- Интеграция с внешними email сервисами
